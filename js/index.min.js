var SlinkyOption={title:true,speed:200};var ListID="#list_";var ListCount=0;var ListCountMax=17;var FullsSreenText=document.querySelector(".fullscreen-text");var LinkList=document.querySelectorAll("main a");var SearchMode=1;var SearchPanel=document.querySelector(".search-panel");var SearchInput=document.querySelector(".search-input");var SearchResultTitle=document.querySelector("#search-result-title");var SearchResultLink=document.querySelector("#search-result-link");var SearchResultItem="";var SearchEngineBaidu=document.querySelector("#search-engine-baidu");var SearchEngineBing=document.querySelector("#search-engine-bing");var SearchEngineGoogle=document.querySelector("#search-engine-google");var SearchEnginebilibili=document.querySelector("#search-engine-bilibili");var ToolPanel=document.querySelector(".tool-panel");function findChar(str,tChar,num){var charPos=str.indexOf(tChar);num=num-1;if(num>0){for(var i=0;i<num;i++){charPos=str.indexOf(tChar,charPos+1);}}
return charPos;}
function setTarget(){for(var i=0;i<LinkList.length;i++){if(LinkList[i].href.endsWith("#")==false){LinkList[i].target="_blank";}}}
function displayList(){document.querySelector("main").style.opacity="1";FullsSreenText.style.opacity="0";setTimeout(function(){document.querySelector(".fullscreen-text").style.display="none";},1000);}
function loadList(){ListCount=ListCount+1;ListID="#list_"+ListCount;$(ListID).slinky(SlinkyOption);FullsSreenText.innerHTML="已加载 "+ListCount+" 个分类";if(ListCount==ListCountMax){clearInterval(I_LoadList);FullsSreenText.innerHTML="加载完毕";setTarget();displayList();}}
var I_LoadList=setInterval("loadList()",100);function searchLink(){var LinkListCount=LinkList.length;var SearchWord=SearchInput.value.toLowerCase();if(SearchMode==1&&SearchWord!=""){SearchResultTitle.innerHTML="";SearchResultLink.innerHTML="";for(var i=0;i<LinkListCount;i++){if(LinkList[i].href.endsWith("#")==false){if(LinkList[i].innerHTML.toLowerCase().indexOf(SearchWord)!=-1){SearchResultItem=LinkList[i].cloneNode(true);SearchResultTitle.appendChild(SearchResultItem);}else if(LinkList[i].href.indexOf(SearchWord)!=-1){SearchResultItem=LinkList[i].cloneNode(true);SearchResultLink.appendChild(SearchResultItem);}}}}else if(SearchMode==1&&SearchWord==""){SearchResultTitle.innerHTML="";SearchResultLink.innerHTML="未输入关键词";}else if(SearchMode==2){SearchInput.value="";SearchResultTitle.innerHTML="";SearchResultLink.innerHTML="";SearchPanel.style.visibility="hidden";}else{SearchResultTitle.innerHTML="";SearchResultLink.innerHTML="异常";}}
function searchWeb(){var GetSearchWord=document.querySelector("#search-engine-input");var SearchWord=GetSearchWord.value;if(SearchEngineBaidu.checked==true){window.open("https://www.baidu.com/s?ie=UTF-8&wd="+SearchWord);}else if(SearchEngineBing.checked==true){window.open("https://cn.bing.com/search?q="+SearchWord);}else if(SearchEngineGoogle.checked==true){window.open("https://www.google.com/search?q="+SearchWord);}else if(SearchEnginebilibili.checked==true){window.open("https://search.bilibili.com/all"+"?keyword="+SearchWord);}else{GetSearchWord.value="搜索引擎选择有误！"}}
function setSearchEngine(Name){switch(Name)
{case"baidu":localStorage.setItem("SearchEngine","baidu");break;case"bing":localStorage.setItem("SearchEngine","bing");break;case"google":localStorage.setItem("SearchEngine","google");break;case"bilibili":localStorage.setItem("SearchEngine","bilibili");break;default:break;}}
function getSearchEngine(){var SearchEngine=localStorage.getItem("SearchEngine");switch(SearchEngine){case"baidu":SearchEngineBaidu.checked=true;break;case"bing":SearchEngineBing.checked=true;break;case"google":SearchEngineGoogle.checked=true;break;case"bilibili":SearchEnginebilibili.checked=true;break;default:break;}}
getSearchEngine();function showToolPanel(){ToolPanel.style.display="block";}
function closeToolPanel(){ToolPanel.style.bottom="-110%";ToolPanel.style.opacity="0";setTimeout(function(){ToolPanel.style.display="none";ToolPanel.style.bottom="0";ToolPanel.style.opacity="1";},500);}
