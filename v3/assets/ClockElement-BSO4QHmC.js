import{_ as x,r as D,M as E,o as C,L as S,aB as V,P as H,z,A as U,B as c,E as W,ae as $,af as X,D as Y,a_ as j,bP as q,bQ as Q,bR as R,aK as F,aL as J}from"./index-kyOYeI3c.js";import{f as Z,g as ee,h as te,j as ae,k as ne,l as le,m as ie,n as oe,o as se,p as re,q as ce,r as de,s as ge,u as ve,v as ue,w as me,t as fe,e as pe,d as Ae,x as k,y as _e,z as we,A as Ee,i as I,B as G}from"./common-data--wCnSwj5.js";import Ie from"./ClockColor-qpLbtX0X.js";const L=p=>(F("data-v-164bce39"),p=p(),J(),p),be=L(()=>c("div",{class:"clock-outer bg-contain"},null,-1)),Me={class:"clock-inner"},he=R('<div class="inner-bg bg-cover" data-v-164bce39></div><div class="inner-star bg-cover" data-v-164bce39></div><div class="clock-gear" data-v-164bce39><div class="gear-6" data-v-164bce39></div><div class="gear-5" data-v-164bce39></div><div class="gear-4" data-v-164bce39></div><div class="gear-3" data-v-164bce39></div><div class="gear-2" data-v-164bce39></div><div class="gear-1" data-v-164bce39></div></div>',3),Ce=L(()=>c("div",{class:"pointer-wrapper pointer-lower bg-contain"},[c("div",{class:"pointer-content"})],-1)),Se={class:"pointer-wrapper pointer-upper bg-contain"},ke=R('<div class="clock-dial bg-contain" data-v-164bce39><div class="time-icons" data-v-164bce39><div class="time-morning bg-contain" style="--self-angle-1:270;--self-angle-2:270;" data-v-164bce39></div><div class="time-noon bg-contain" style="--self-angle-1:0;--self-angle-2:360;" data-v-164bce39></div><div class="time-dusk bg-contain" style="--self-angle-1:90;--self-angle-2:90;" data-v-164bce39></div><div class="time-night bg-contain" style="--self-angle-1:180;--self-angle-2:180;" data-v-164bce39></div></div></div>',1),Ge={class:"clock-mask"},Re={__name:"ClockElement",setup(p,{expose:N}){const b=D(null),d=E({isRotation:!1,lastAngle:0,rotationWatcher:null}),s=E({viewAngle:0}),n=E({isSecond:!1,dataAngle:0,viewAngle:0});window.upperPointer=n;const O=C(()=>({"--image-clock-bg-inner":Z,"--image-clock-bg-outer":ee,"--image-clock-dial":te,"--image-clock-gear-1":ae,"--image-clock-gear-4":ne,"--image-clock-gear-5":le,"--image-clock-gear-6":ie,"--image-clock-particles":oe,"--image-pointer-lower":se,"--image-pointer-upper":re,"--image-time-icon-dusk":ce,"--image-time-icon-morning":de,"--image-time-icon-night":ge,"--image-time-icon-noon":ve,"--pointer-lower-angle":"".concat(s.viewAngle,"deg"),"--pointer-lower-angle-value":s.viewAngle,"--pointer-upper-angle":"".concat(n.viewAngle,"deg"),"--pointer-upper-angle-value":n.viewAngle})),w=C(()=>{const{dataAngle:t,isSecond:e}=n;return e?t+360:t});function P(){d.rotationWatcher=setInterval(function(){const t=w.value,e=d.lastAngle;d.isRotation=Math.abs(t-e)>=5,d.lastAngle=t},250)}function T(){clearInterval(d.rotationWatcher)}function y(t){if(t){const e=t.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2}}else return null}function B(){const t=y(b.value);if(!t)return;const e=t.x,a=t.y;let i=0,l=function(o){let g=Date.now();if(g-i>=20)i=g;else return;let{pageX:v,pageY:M}=o,f=v-e,A=M-a,_=Math.round(Math.atan2(A,f)*(180/Math.PI)),r=_+(_>=-90?90:450),u=0,m=s.viewAngle;r>=m?u=r-m:r<m&&(u=r+(360-m));let h=u-n.dataAngle;h<=-180&&(n.isSecond?(u=360,r=360+m):n.isSecond=!0),h>=180&&(n.isSecond?n.isSecond=!1:(u=0,r=m)),n.dataAngle=u,n.viewAngle=r};window.addEventListener("pointermove",l),window.addEventListener("pointerup",function(){window.removeEventListener("pointermove",l)},{once:!0})}function K(){let t=s.viewAngle,e=w.value,a=e,i=setInterval(()=>{a=Math.max(0,a-2),a===0&&(clearInterval(i),I.value=!1,G.value="");let l=e-a,o=t+l;s.viewAngle=o%360,n.dataAngle=a%360,n.isSecond=a>=360},50);I.value=!0,G.value=k.value}return N({handleSubmitTime:K}),S(()=>s.viewAngle,t=>{let a=(t+(t<180?180:-180))/15,i=Math.floor(a),l=Math.round((a-i)*60);ue.value=String(i).padStart(2,"0"),me.value=String(l).padStart(2,"0"),fe.value=a},{immediate:!0}),S(()=>n.dataAngle,t=>{let e=n.isSecond,a=s.viewAngle,i=n.viewAngle,l=t+(e?360:0),o=0,g=0,v="",f=(i+(i<180?180:-180))/15,A=Math.floor(f),_=Math.round((f-A)*60);a<180?(o=180-a,g=o+360):(o=540-a,g=o+360),l<o?v="今日":l<g?v="次日":v="+2日",pe.value=l<7.5,Ae.value=l===720,k.value=v,_e.value=String(A).padStart(2,"0"),we.value=String(_).padStart(2,"0"),Ee.value=f},{immediate:!0}),V(()=>{P()}),H(()=>{T()}),(t,e)=>(z(),U("div",{ref_key:"clockElement",ref:b,class:j({"clock-element":!0,"clock-rotation":d.isRotation}),style:q(O.value),onTouchmove:e[1]||(e[1]=Q(()=>{},["prevent"]))},[be,c("div",Me,[he,W(Ie,{"curr-angle":w.value,"start-angle":s.viewAngle},null,8,["curr-angle","start-angle"]),Ce,c("div",Se,[c("div",{class:"pointer-content",onPointerdown:e[0]||(e[0]=a=>B())},null,32)])]),ke,$(c("div",Ge,null,512),[[X,Y(I)]])],38))}},Pe=x(Re,[["__scopeId","data-v-164bce39"]]);export{Pe as default};
