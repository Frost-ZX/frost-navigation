import{J as ht,K as pt,bL as ft,bM as O,bN as I,bO as L,bP as G,bQ as F,bR as ie,bS as W,f as _,m as k,g as U,l as i,H as se,E as ue,M as vt,N as je,a9 as Ke,bT as pe,bU as ze,bV as Ve,bW as Me,P as gt,d as ne,c as b,Z as mt,b as z,a as Ne,b4 as bt,i as xt,u as Xe,T as kt,a0 as Re,I as wt,h as qe,k as yt,aj as St,bd as Ct,V as Ut,ac as De,aa as $t,a1 as ge,aN as me,aG as Rt,_ as At,bX as zt,D as Vt,x as Mt,n as Dt,o as de,q as be,w as oe,aK as ae,p as M,ad as Ee,a$ as Pt,aX as It,b6 as Ft,$ as q}from"./index-BKvL4bCX.js";import{c as _t,d as Ht}from"./index-JVWQwFoa.js";import{i as Tt,N as Bt,u as Nt}from"./Input-CylcvuRs.js";import{N as qt}from"./InputGroup-Ce5llk5n.js";import{u as Oe}from"./use-merged-state-CKbFJlkG.js";import{u as Pe,B as Et,V as Ot,a as Lt}from"./Follower-L5kM5qp8.js";import{N as Ae}from"./Switch-Dl8nePp7.js";function Ze(e,t,n){t/=100,n/=100;const r=t*Math.min(n,1-n)+n;return[e,r?(2-2*n/r)*100:0,r*100]}function we(e,t,n){t/=100,n/=100;const r=n-n*t/2,a=Math.min(r,1-r);return[e,a?(n-r)/a*100:0,r*100]}function E(e,t,n){t/=100,n/=100;let r=(a,o=(a+e/60)%6)=>n-n*t*Math.max(Math.min(o,4-o,1),0);return[r(5)*255,r(3)*255,r(1)*255]}function Ie(e,t,n){e/=255,t/=255,n/=255;let r=Math.max(e,t,n),a=r-Math.min(e,t,n),o=a&&(r==e?(t-n)/a:r==t?2+(n-e)/a:4+(e-t)/a);return[60*(o<0?o+6:o),r&&a/r*100,r*100]}function Fe(e,t,n){e/=255,t/=255,n/=255;let r=Math.max(e,t,n),a=r-Math.min(e,t,n),o=1-Math.abs(r+r-a-1),s=a&&(r==e?(t-n)/a:r==t?2+(n-e)/a:4+(e-t)/a);return[60*(s<0?s+6:s),o?a/o*100:0,(r+r-a)*50]}function _e(e,t,n){t/=100,n/=100;let r=t*Math.min(n,1-n),a=(o,s=(o+e/30)%12)=>n-r*Math.max(Math.min(s-3,9-s,1),-1);return[a(0)*255,a(8)*255,a(4)*255]}function jt(e){const{fontSize:t,boxShadow2:n,popoverColor:r,textColor2:a,borderRadius:o,borderColor:s,heightSmall:u,heightMedium:h,heightLarge:x,fontSizeSmall:c,fontSizeMedium:y,fontSizeLarge:H,dividerColor:J}=e;return{panelFontSize:t,boxShadow:n,color:r,textColor:a,borderRadius:o,border:"1px solid ".concat(s),heightSmall:u,heightMedium:h,heightLarge:x,fontSizeSmall:c,fontSizeMedium:y,fontSizeLarge:H,dividerColor:J}}const Kt=ht({name:"ColorPicker",common:pt,peers:{Input:Tt,Button:ft},self:jt});function Xt(e,t){switch(e[0]){case"hex":return t?"#000000FF":"#000000";case"rgb":return t?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return t?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return t?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function fe(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function Zt(e){return e=Math.round(e),e>=360?359:e<0?0:e}function Gt(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const Wt={rgb:{hex(e){return O(I(e))},hsl(e){const[t,n,r,a]=I(e);return L([...Fe(t,n,r),a])},hsv(e){const[t,n,r,a]=I(e);return G([...Ie(t,n,r),a])}},hex:{rgb(e){return F(I(e))},hsl(e){const[t,n,r,a]=I(e);return L([...Fe(t,n,r),a])},hsv(e){const[t,n,r,a]=I(e);return G([...Ie(t,n,r),a])}},hsl:{hex(e){const[t,n,r,a]=ie(e);return O([..._e(t,n,r),a])},rgb(e){const[t,n,r,a]=ie(e);return F([..._e(t,n,r),a])},hsv(e){const[t,n,r,a]=ie(e);return G([...Ze(t,n,r),a])}},hsv:{hex(e){const[t,n,r,a]=W(e);return O([...E(t,n,r),a])},rgb(e){const[t,n,r,a]=W(e);return F([...E(t,n,r),a])},hsl(e){const[t,n,r,a]=W(e);return L([...we(t,n,r),a])}}};function Ge(e,t,n){return n=n||fe(e),n?n===t?e:Wt[n][t](e):null}const he="12px",Jt=12,X="6px",Qt=_({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const t=k(null);function n(o){!t.value||!e.rgba||(se("mousemove",document,r),se("mouseup",document,a),r(o))}function r(o){const{value:s}=t;if(!s)return;const{width:u,left:h}=s.getBoundingClientRect(),x=(o.clientX-h)/(u-Jt);e.onUpdateAlpha(Gt(x))}function a(){var o;ue("mousemove",document,r),ue("mouseup",document,a),(o=e.onComplete)===null||o===void 0||o.call(e)}return{railRef:t,railBackgroundImage:U(()=>{const{rgba:o}=e;return o?"linear-gradient(to right, rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0) 0%, rgba(").concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1) 100%)"):""}),handleMouseDown:n}},render(){const{clsPrefix:e}=this;return i("div",{class:"".concat(e,"-color-picker-slider"),ref:"railRef",style:{height:he,borderRadius:X},onMousedown:this.handleMouseDown},i("div",{style:{borderRadius:X,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},i("div",{class:"".concat(e,"-color-picker-checkboard")}),i("div",{class:"".concat(e,"-color-picker-slider__image"),style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&i("div",{style:{position:"absolute",left:X,right:X,top:0,bottom:0}},i("div",{class:"".concat(e,"-color-picker-handle"),style:{left:"calc(".concat(this.alpha*100,"% - ").concat(X,")"),borderRadius:X,width:he,height:he}},i("div",{class:"".concat(e,"-color-picker-handle__fill"),style:{backgroundColor:F(this.rgba),borderRadius:X,width:he,height:he}}))))}}),He=vt("n-color-picker");function Yt(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function er(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function tr(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function rr(e){const t=e.trim();return/^#[0-9a-fA-F]+$/.test(t)?[4,5,7,9].includes(t.length):!1}function nr(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const or={paddingSmall:"0 4px"},Le=_({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const t=k(""),{themeRef:n}=je(He,null);Ke(()=>{t.value=r()});function r(){const{value:s}=e;if(s===null)return"";const{label:u}=e;return u==="HEX"?s:u==="A"?"".concat(Math.floor(s*100),"%"):String(Math.floor(s))}function a(s){t.value=s}function o(s){let u,h;switch(e.label){case"HEX":h=rr(s),h&&e.onUpdateValue(s),t.value=r();break;case"H":u=er(s),u===!1?t.value=r():e.onUpdateValue(u);break;case"S":case"L":case"V":u=tr(s),u===!1?t.value=r():e.onUpdateValue(u);break;case"A":u=nr(s),u===!1?t.value=r():e.onUpdateValue(u);break;case"R":case"G":case"B":u=Yt(s),u===!1?t.value=r():e.onUpdateValue(u);break}}return{mergedTheme:n,inputValue:t,handleInputChange:o,handleInputUpdateValue:a}},render(){const{mergedTheme:e}=this;return i(Bt,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:or,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),ar=_({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(t,n){const{showAlpha:r}=e;if(e.mode==="hex"){e.onUpdateValue((r?O:pe)(n));return}let a;switch(e.valueArr===null?a=[0,0,0,0]:a=Array.from(e.valueArr),e.mode){case"hsv":a[t]=n,e.onUpdateValue((r?G:Me)(a));break;case"rgb":a[t]=n,e.onUpdateValue((r?F:Ve)(a));break;case"hsl":a[t]=n,e.onUpdateValue((r?L:ze)(a));break}}}},render(){const{clsPrefix:e,modes:t}=this;return i("div",{class:"".concat(e,"-color-picker-input")},i("div",{class:"".concat(e,"-color-picker-input__mode"),onClick:this.onUpdateMode,style:{cursor:t.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),i(qt,null,{default:()=>{const{mode:n,valueArr:r,showAlpha:a}=this;if(n==="hex"){let o=null;try{o=r===null?null:(a?O:pe)(r)}catch(s){}return i(Le,{label:"HEX",showAlpha:a,value:o,onUpdateValue:s=>{this.handleUnitUpdateValue(0,s)}})}return(n+(a?"a":"")).split("").map((o,s)=>i(Le,{label:o.toUpperCase(),value:r===null?null:r[s],onUpdateValue:u=>{this.handleUnitUpdateValue(s,u)}}))}}))}});function lr(e,t){if(t==="hsv"){const[n,r,a,o]=W(e);return F([...E(n,r,a),o])}return e}function ir(e){const t=document.createElement("canvas").getContext("2d");return t?(t.fillStyle=e,t.fillStyle):"#000000"}const sr=_({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const t=U(()=>e.swatches.map(o=>{const s=fe(o);return{value:o,mode:s,legalValue:lr(o,s)}}));function n(o){const{mode:s}=e;let{value:u,mode:h}=o;return h||(h="hex",/^[a-zA-Z]+$/.test(u)?u=ir(u):(gt("color-picker","color ".concat(u," in swatches is invalid.")),u="#000000")),h===s?u:Ge(u,s,h)}function r(o){e.onUpdateColor(n(o))}function a(o,s){o.key==="Enter"&&r(s)}return{parsedSwatchesRef:t,handleSwatchSelect:r,handleSwatchKeyDown:a}},render(){const{clsPrefix:e}=this;return i("div",{class:"".concat(e,"-color-picker-swatches")},this.parsedSwatchesRef.map(t=>i("div",{class:"".concat(e,"-color-picker-swatch"),tabindex:0,onClick:()=>{this.handleSwatchSelect(t)},onKeydown:n=>{this.handleSwatchKeyDown(n,t)}},i("div",{class:"".concat(e,"-color-picker-swatch__fill"),style:{background:t.legalValue}}))))}}),ur=_({name:"ColorPickerTrigger",slots:Object,props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:t,renderLabelRef:n}=je(He,null);return()=>{const{hsla:r,value:a,clsPrefix:o,onClick:s,disabled:u}=e,h=t.label||n.value;return i("div",{class:["".concat(o,"-color-picker-trigger"),u&&"".concat(o,"-color-picker-trigger--disabled")],onClick:u?void 0:s},i("div",{class:"".concat(o,"-color-picker-trigger__fill")},i("div",{class:"".concat(o,"-color-picker-checkboard")}),i("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:r?L(r):""}}),a&&r?i("div",{class:"".concat(o,"-color-picker-trigger__value"),style:{color:r[2]>50||r[3]<.5?"black":"white"}},h?h(a):a):null))}}}),cr=_({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const t=fe(e);return!!(!e||t&&t!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function t(n){var r;const a=n.target.value;(r=e.onUpdateColor)===null||r===void 0||r.call(e,Ge(a.toUpperCase(),e.mode,"hex")),n.stopPropagation()}return{handleChange:t}},render(){const{clsPrefix:e}=this;return i("div",{class:"".concat(e,"-color-picker-preview__preview")},i("span",{class:"".concat(e,"-color-picker-preview__fill"),style:{background:this.color||"#000000"}}),i("input",{class:"".concat(e,"-color-picker-preview__input"),type:"color",value:this.color,onChange:this.handleChange}))}}),le="12px",dr=12,Z="6px",hr=6,pr="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",fr=_({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const t=k(null);function n(o){t.value&&(se("mousemove",document,r),se("mouseup",document,a),r(o))}function r(o){const{value:s}=t;if(!s)return;const{width:u,left:h}=s.getBoundingClientRect(),x=Zt((o.clientX-h-hr)/(u-dr)*360);e.onUpdateHue(x)}function a(){var o;ue("mousemove",document,r),ue("mouseup",document,a),(o=e.onComplete)===null||o===void 0||o.call(e)}return{railRef:t,handleMouseDown:n}},render(){const{clsPrefix:e}=this;return i("div",{class:"".concat(e,"-color-picker-slider"),style:{height:le,borderRadius:Z}},i("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:pr,height:le,borderRadius:Z,position:"relative"},onMousedown:this.handleMouseDown},i("div",{style:{position:"absolute",left:Z,right:Z,top:0,bottom:0}},i("div",{class:"".concat(e,"-color-picker-handle"),style:{left:"calc((".concat(this.hue,"%) / 359 * 100 - ").concat(Z,")"),borderRadius:Z,width:le,height:le}},i("div",{class:"".concat(e,"-color-picker-handle__fill"),style:{backgroundColor:"hsl(".concat(this.hue,", 100%, 50%)"),borderRadius:Z,width:le,height:le}})))))}}),xe="12px",ke="6px",vr=_({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const t=k(null);function n(o){t.value&&(se("mousemove",document,r),se("mouseup",document,a),r(o))}function r(o){const{value:s}=t;if(!s)return;const{width:u,height:h,left:x,bottom:c}=s.getBoundingClientRect(),y=(c-o.clientY)/h,H=(o.clientX-x)/u,J=100*(H>1?1:H<0?0:H),Q=100*(y>1?1:y<0?0:y);e.onUpdateSV(J,Q)}function a(){var o;ue("mousemove",document,r),ue("mouseup",document,a),(o=e.onComplete)===null||o===void 0||o.call(e)}return{palleteRef:t,handleColor:U(()=>{const{rgba:o}=e;return o?"rgb(".concat(o[0],", ").concat(o[1],", ").concat(o[2],")"):""}),handleMouseDown:n}},render(){const{clsPrefix:e}=this;return i("div",{class:"".concat(e,"-color-picker-pallete"),onMousedown:this.handleMouseDown,ref:"palleteRef"},i("div",{class:"".concat(e,"-color-picker-pallete__layer"),style:{backgroundImage:"linear-gradient(90deg, white, hsl(".concat(this.displayedHue,", 100%, 50%))")}}),i("div",{class:"".concat(e,"-color-picker-pallete__layer ").concat(e,"-color-picker-pallete__layer--shadowed"),style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&i("div",{class:"".concat(e,"-color-picker-handle"),style:{width:xe,height:xe,borderRadius:ke,left:"calc(".concat(this.displayedSv[0],"% - ").concat(ke,")"),bottom:"calc(".concat(this.displayedSv[1],"% - ").concat(ke,")")}},i("div",{class:"".concat(e,"-color-picker-handle__fill"),style:{backgroundColor:this.handleColor,borderRadius:ke,width:xe,height:xe}})))}}),gr=ne([b("color-picker","\n display: inline-block;\n box-sizing: border-box;\n height: var(--n-height);\n font-size: var(--n-font-size);\n width: 100%;\n position: relative;\n "),b("color-picker-panel","\n margin: 4px 0;\n width: 240px;\n font-size: var(--n-panel-font-size);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n ",[mt(),b("input","\n text-align: center;\n ")]),b("color-picker-checkboard","\n background: white; \n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[ne("&::after",'\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 12px 12px;\n background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n background-repeat: repeat;\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),b("color-picker-slider","\n margin-bottom: 8px;\n position: relative;\n box-sizing: border-box;\n ",[z("image","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n "),ne("&::after",'\n content: "";\n position: absolute;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n pointer-events: none;\n ')]),b("color-picker-handle","\n z-index: 1;\n box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);\n position: absolute;\n background-color: white;\n overflow: hidden;\n ",[z("fill","\n box-sizing: border-box;\n border: 2px solid white;\n ")]),b("color-picker-pallete","\n height: 180px;\n position: relative;\n margin-bottom: 8px;\n cursor: crosshair;\n ",[z("layer","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[Ne("shadowed","\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n ")])]),b("color-picker-preview","\n display: flex;\n ",[z("sliders","\n flex: 1 0 auto;\n "),z("preview","\n position: relative;\n height: 30px;\n width: 30px;\n margin: 0 0 8px 6px;\n border-radius: 50%;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n overflow: hidden;\n "),z("fill","\n display: block;\n width: 30px;\n height: 30px;\n "),z("input","\n position: absolute;\n top: 0;\n left: 0;\n width: 30px;\n height: 30px;\n opacity: 0;\n z-index: 1;\n ")]),b("color-picker-input","\n display: flex;\n align-items: center;\n ",[b("input","\n flex-grow: 1;\n flex-basis: 0;\n "),z("mode","\n width: 72px;\n text-align: center;\n ")]),b("color-picker-control","\n padding: 12px;\n "),b("color-picker-action","\n display: flex;\n margin-top: -4px;\n border-top: 1px solid var(--n-divider-color);\n padding: 8px 12px;\n justify-content: flex-end;\n ",[b("button","margin-left: 8px;")]),b("color-picker-trigger","\n border: var(--n-border);\n height: 100%;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n transition: border-color .3s var(--n-bezier);\n cursor: pointer;\n ",[z("value","\n white-space: nowrap;\n position: relative;\n "),z("fill","\n border-radius: var(--n-border-radius);\n position: absolute;\n display: flex;\n align-items: center;\n justify-content: center;\n left: 4px;\n right: 4px;\n top: 4px;\n bottom: 4px;\n "),Ne("disabled","cursor: not-allowed"),b("color-picker-checkboard","\n border-radius: var(--n-border-radius);\n ",[ne("&::after","\n --n-block-size: calc((var(--n-height) - 8px) / 3);\n background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);\n background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; \n ")])]),b("color-picker-swatches","\n display: grid;\n grid-gap: 8px;\n flex-wrap: wrap;\n position: relative;\n grid-template-columns: repeat(auto-fill, 18px);\n margin-top: 10px;\n ",[b("color-picker-swatch","\n width: 18px;\n height: 18px;\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 8px 8px;\n background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;\n background-repeat: repeat;\n ",[z("fill","\n position: relative;\n width: 100%;\n height: 100%;\n border-radius: 3px;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n cursor: pointer;\n "),ne("&:focus","\n outline: none;\n ",[z("fill",[ne("&::after",'\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n background: inherit;\n filter: blur(2px);\n content: "";\n ')])])])])]),mr=Object.assign(Object.assign({},Xe.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:Pe.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),br=_({name:"ColorPicker",props:mr,slots:Object,setup(e,{slots:t}){const n=k(null);let r=null;const a=bt(e),{mergedSizeRef:o,mergedDisabledRef:s}=a,{localeRef:u}=Nt("global"),{mergedClsPrefixRef:h,namespaceRef:x,inlineThemeDisabled:c}=xt(e),y=Xe("ColorPicker","-color-picker",gr,Kt,e,h);kt(He,{themeRef:y,renderLabelRef:Re(e,"renderLabel"),colorPickerSlots:t});const H=k(e.defaultShow),J=Oe(Re(e,"show"),H);function Q(l){const{onUpdateShow:d,"onUpdate:show":f}=e;d&&ge(d,l),f&&ge(f,l),H.value=l}const{defaultValue:Te}=e,Be=k(Te===void 0?Xt(e.modes,e.showAlpha):Te),S=Oe(Re(e,"value"),Be),Y=k([S.value]),D=k(0),ye=U(()=>fe(S.value)),{modes:We}=e,V=k(fe(S.value)||We[0]||"rgb");function Je(){const{modes:l}=e,{value:d}=V,f=l.findIndex(v=>v===d);~f?V.value=l[(f+1)%l.length]:V.value="rgb"}let $,R,ee,te,T,B,N,A;const ce=U(()=>{const{value:l}=S;if(!l)return null;switch(ye.value){case"hsv":return W(l);case"hsl":return[$,R,ee,A]=ie(l),[...Ze($,R,ee),A];case"rgb":case"hex":return[T,B,N,A]=I(l),[...Ie(T,B,N),A]}}),j=U(()=>{const{value:l}=S;if(!l)return null;switch(ye.value){case"rgb":case"hex":return I(l);case"hsv":return[$,R,te,A]=W(l),[...E($,R,te),A];case"hsl":return[$,R,ee,A]=ie(l),[..._e($,R,ee),A]}}),Se=U(()=>{const{value:l}=S;if(!l)return null;switch(ye.value){case"hsl":return ie(l);case"hsv":return[$,R,te,A]=W(l),[...we($,R,te),A];case"rgb":case"hex":return[T,B,N,A]=I(l),[...Fe(T,B,N),A]}}),Qe=U(()=>{switch(V.value){case"rgb":case"hex":return j.value;case"hsv":return ce.value;case"hsl":return Se.value}}),ve=k(0),Ce=k(1),Ue=k([0,0]);function Ye(l,d){const{value:f}=ce,v=ve.value,g=f?f[3]:1;Ue.value=[l,d];const{showAlpha:p}=e;switch(V.value){case"hsv":m((p?G:Me)([v,l,d,g]),"cursor");break;case"hsl":m((p?L:ze)([...we(v,l,d),g]),"cursor");break;case"rgb":m((p?F:Ve)([...E(v,l,d),g]),"cursor");break;case"hex":m((p?O:pe)([...E(v,l,d),g]),"cursor");break}}function et(l){ve.value=l;const{value:d}=ce;if(!d)return;const[,f,v,g]=d,{showAlpha:p}=e;switch(V.value){case"hsv":m((p?G:Me)([l,f,v,g]),"cursor");break;case"rgb":m((p?F:Ve)([...E(l,f,v),g]),"cursor");break;case"hex":m((p?O:pe)([...E(l,f,v),g]),"cursor");break;case"hsl":m((p?L:ze)([...we(l,f,v),g]),"cursor");break}}function tt(l){switch(V.value){case"hsv":[$,R,te]=ce.value,m(G([$,R,te,l]),"cursor");break;case"rgb":[T,B,N]=j.value,m(F([T,B,N,l]),"cursor");break;case"hex":[T,B,N]=j.value,m(O([T,B,N,l]),"cursor");break;case"hsl":[$,R,ee]=Se.value,m(L([$,R,ee,l]),"cursor");break}Ce.value=l}function m(l,d){d==="cursor"?r=l:r=null;const{nTriggerFormChange:f,nTriggerFormInput:v}=a,{onUpdateValue:g,"onUpdate:value":p}=e;g&&ge(g,l),p&&ge(p,l),f(),v(),Be.value=l}function rt(l){m(l,"input"),Rt(re)}function re(l=!0){const{value:d}=S;if(d){const{nTriggerFormChange:f,nTriggerFormInput:v}=a,{onComplete:g}=e;g&&g(d);const{value:p}=Y,{value:C}=D;l&&(p.splice(C+1,p.length,d),D.value=C+1),f(),v()}}function nt(){const{value:l}=D;l-1<0||(m(Y.value[l-1],"input"),re(!1),D.value=l-1)}function ot(){const{value:l}=D;l<0||l+1>=Y.value.length||(m(Y.value[l+1],"input"),re(!1),D.value=l+1)}function at(){m(null,"input");const{onClear:l}=e;l&&l(),Q(!1)}function lt(){const{value:l}=S,{onConfirm:d}=e;d&&d(l),Q(!1)}const it=U(()=>D.value>=1),st=U(()=>{const{value:l}=Y;return l.length>1&&D.value<l.length-1});wt(J,l=>{l||(Y.value=[S.value],D.value=0)}),Ke(()=>{if(!(r&&r===S.value)){const{value:l}=ce;l&&(ve.value=l[0],Ce.value=l[3],Ue.value=[l[1],l[2]])}r=null});const $e=U(()=>{const{value:l}=o,{common:{cubicBezierEaseInOut:d},self:{textColor:f,color:v,panelFontSize:g,boxShadow:p,border:C,borderRadius:w,dividerColor:K,[qe("height",l)]:ct,[qe("fontSize",l)]:dt}}=y.value;return{"--n-bezier":d,"--n-text-color":f,"--n-color":v,"--n-panel-font-size":g,"--n-font-size":dt,"--n-box-shadow":p,"--n-border":C,"--n-border-radius":w,"--n-height":ct,"--n-divider-color":K}}),P=c?yt("color-picker",U(()=>o.value[0]),$e,e):void 0;function ut(){var l;const{value:d}=j,{value:f}=ve,{internalActions:v,modes:g,actions:p}=e,{value:C}=y,{value:w}=h;return i("div",{class:["".concat(w,"-color-picker-panel"),P==null?void 0:P.themeClass.value],onDragstart:K=>{K.preventDefault()},style:c?void 0:$e.value},i("div",{class:"".concat(w,"-color-picker-control")},i(vr,{clsPrefix:w,rgba:d,displayedHue:f,displayedSv:Ue.value,onUpdateSV:Ye,onComplete:re}),i("div",{class:"".concat(w,"-color-picker-preview")},i("div",{class:"".concat(w,"-color-picker-preview__sliders")},i(fr,{clsPrefix:w,hue:f,onUpdateHue:et,onComplete:re}),e.showAlpha?i(Qt,{clsPrefix:w,rgba:d,alpha:Ce.value,onUpdateAlpha:tt,onComplete:re}):null),e.showPreview?i(cr,{clsPrefix:w,mode:V.value,color:j.value&&pe(j.value),onUpdateColor:K=>{m(K,"input")}}):null),i(ar,{clsPrefix:w,showAlpha:e.showAlpha,mode:V.value,modes:g,onUpdateMode:Je,value:S.value,valueArr:Qe.value,onUpdateValue:rt}),((l=e.swatches)===null||l===void 0?void 0:l.length)&&i(sr,{clsPrefix:w,mode:V.value,swatches:e.swatches,onUpdateColor:K=>{m(K,"input")}})),p!=null&&p.length?i("div",{class:"".concat(w,"-color-picker-action")},p.includes("confirm")&&i(me,{size:"small",onClick:lt,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button},{default:()=>u.value.confirm}),p.includes("clear")&&i(me,{size:"small",onClick:at,disabled:!S.value,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button},{default:()=>u.value.clear})):null,t.action?i("div",{class:"".concat(w,"-color-picker-action")},{default:t.action}):v?i("div",{class:"".concat(w,"-color-picker-action")},v.includes("undo")&&i(me,{size:"small",onClick:nt,disabled:!it.value,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button},{default:()=>u.value.undo}),v.includes("redo")&&i(me,{size:"small",onClick:ot,disabled:!st.value,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button},{default:()=>u.value.redo})):null)}return{mergedClsPrefix:h,namespace:x,selfRef:n,hsla:Se,rgba:j,mergedShow:J,mergedDisabled:s,isMounted:St(),adjustedTo:Pe(e),mergedValue:S,handleTriggerClick(){Q(!0)},handleClickOutside(l){var d;!((d=n.value)===null||d===void 0)&&d.contains(Ct(l))||Q(!1)},renderPanel:ut,cssVars:c?void 0:$e,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender}},render(){const{mergedClsPrefix:e,onRender:t}=this;return t==null||t(),i("div",{class:[this.themeClass,"".concat(e,"-color-picker")],ref:"selfRef",style:this.cssVars},i(Et,null,{default:()=>[i(Ot,null,{default:()=>i(ur,{clsPrefix:e,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick})}),i(Lt,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===Pe.tdkey,to:this.adjustedTo},{default:()=>i(Ut,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?De(this.renderPanel(),[[$t,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),xr={class:"controls"},kr={class:"title"},wr={__name:"KeepScreenOn",setup(e){const t=k("#505050"),n=U(()=>{let x=t.value;return zt(x)<192}),r=k(!1),a=k(null),o=_t(a,{autoExit:!0}),s=Ht();function u(){o.toggle().then(()=>{o.isFullscreen.value?q.success("进入全屏"):q.success("退出全屏")}).catch(x=>{console.error("切换全屏失败："),console.error(x),q.error("切换全屏失败")})}function h(x=!1){return s.isSupported?x?s.request("screen").then(()=>{q.success("开启")}).catch(c=>{console.error("请求唤醒锁失败："),console.error(c),q.error("请求唤醒锁失败")}):s.release().then(()=>{q.success("关闭")}).catch(c=>{console.error("释放唤醒锁失败："),console.error(c),q.error("释放唤醒锁失败")}):(q.warning("当前浏览器不支持该功能"),Promise.resolve(!1))}return Vt(()=>{s.isActive.value&&h(!1)}),(x,c)=>(Mt(),Dt("div",{ref_key:"selfRef",ref:a,class:It(["tool-detail-page",{"has-radius":!M(o).isFullscreen.value,"is-dark-color":n.value,"is-faded":r.value,"is-on":M(s).isActive.value}]),style:Ft({"--bg-color":t.value}),onClick:c[3]||(c[3]=y=>r.value=!1)},[de("div",xr,[c[10]||(c[10]=de("div",{class:"title"},"开关 / Switch",-1)),be(M(Ae),{value:M(s).isActive.value,size:"medium",round:!1,"onUpdate:value":h},{checked:oe(()=>c[4]||(c[4]=[ae("开启")])),unchecked:oe(()=>c[5]||(c[5]=[ae("关闭")])),_:1},8,["value"]),c[11]||(c[11]=de("div",{class:"title"},"背景颜色 / Background Color",-1)),be(M(br),{value:t.value,"onUpdate:value":c[0]||(c[0]=y=>t.value=y),size:"medium",modes:["hex"],"show-preview":!0,swatches:["#000000","#252525","#505050","#808080","#FFFFFF"]},null,8,["value"]),De(de("div",kr,"切换全屏 / Toggle Fullscreen",512),[[Ee,M(o).isSupported]]),De(be(M(Ae),{size:"medium",round:!1,value:M(o).isFullscreen.value,"onUpdate:value":u},{checked:oe(()=>c[6]||(c[6]=[ae("开启")])),unchecked:oe(()=>c[7]||(c[7]=[ae("关闭")])),_:1},8,["value"]),[[Ee,M(o).isSupported]]),c[12]||(c[12]=de("div",{class:"title"},"隐藏界面 / Hide UI",-1)),be(M(Ae),{value:r.value,"onUpdate:value":c[1]||(c[1]=y=>r.value=y),size:"medium",round:!1,onClick:c[2]||(c[2]=Pt(()=>{},["stop"]))},{checked:oe(()=>c[8]||(c[8]=[ae("隐藏")])),unchecked:oe(()=>c[9]||(c[9]=[ae("显示")])),_:1},8,["value"])])],6))}},zr=At(wr,[["__scopeId","data-v-66109328"]]);export{zr as default};
