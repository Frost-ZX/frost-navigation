import{aB as D,P as E,c3 as ut,a as U,i as y,a0 as dt,a1 as pt,X as ht,r as O,T as L,Q as C,b as _,m as F,x as ft,bI as mt,c4 as vt,ae as G,c5 as T,c6 as ct,b3 as bt,L as z,t as N,ak as wt,v as V,am as xt,an as yt,aH as Mt}from"./index-kyOYeI3c.js";let X=[];const J=new WeakMap;function $t(){X.forEach(n=>n(...J.get(n))),X=[]}function gt(n,...t){J.set(n,t),!X.includes(n)&&X.push(n)===1&&requestAnimationFrame($t)}let $,g;const zt=()=>{var n,t;$=ut?(t=(n=document)===null||n===void 0?void 0:n.fonts)===null||t===void 0?void 0:t.ready:void 0,g=!1,$!==void 0?$.then(()=>{g=!0}):g=!0};zt();function Bt(n){if(g)return;let t=!1;D(()=>{g||$==null||$.then(()=>{t||n()})}),E(()=>{t=!0})}const _t=U("n-internal-select-menu"),At=U("n-internal-select-menu-body"),Z="__disabled__";function R(n){const t=y(dt,null),e=y(pt,null),l=y(ht,null),a=y(At,null),m=O();if(typeof document<"u"){m.value=document.fullscreenElement;const u=()=>{m.value=document.fullscreenElement};D(()=>{L("fullscreenchange",document,u)}),E(()=>{C("fullscreenchange",document,u)})}return _(()=>{var u;const{to:h}=n;return h!==void 0?h===!1?Z:h===!0?m.value||"body":h:t!=null&&t.value?(u=t.value.$el)!==null&&u!==void 0?u:t.value:e!=null&&e.value?e.value:l!=null&&l.value?l.value:a!=null&&a.value?a.value:h!=null?h:m.value||"body"})}R.tdkey=Z;R.propTo={type:[String,Object,Boolean],default:void 0};let x=null;function tt(){if(x===null&&(x=document.getElementById("v-binder-view-measurer"),x===null)){x=document.createElement("div"),x.id="v-binder-view-measurer";const{style:n}=x;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(x)}return x.getBoundingClientRect()}function Ct(n,t){const e=tt();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function S(n){const t=n.getBoundingClientRect(),e=tt();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function Ot(n){return n.nodeType===9?null:n.parentNode}function et(n){if(n===null)return null;const t=Ot(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:l,overflowY:a}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+a+l))return t}return et(t)}const Dt=F({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;ft("VBinder",(t=mt())===null||t===void 0?void 0:t.proxy);const e=y("VBinder",null),l=O(null),a=r=>{l.value=r,e&&n.syncTargetWithParent&&e.setTargetRef(r)};let m=[];const u=()=>{let r=l.value;for(;r=et(r),r!==null;)m.push(r);for(const c of m)L("scroll",c,b,!0)},h=()=>{for(const r of m)C("scroll",r,b,!0);m=[]},i=new Set,v=r=>{i.size===0&&u(),i.has(r)||i.add(r)},w=r=>{i.has(r)&&i.delete(r),i.size===0&&h()},b=()=>{gt(o)},o=()=>{i.forEach(r=>r())},s=new Set,p=r=>{s.size===0&&L("resize",window,f),s.has(r)||s.add(r)},d=r=>{s.has(r)&&s.delete(r),s.size===0&&C("resize",window,f)},f=()=>{s.forEach(r=>r())};return E(()=>{C("resize",window,f),h()}),{targetRef:l,setTargetRef:a,addScrollListener:v,removeScrollListener:w,addResizeListener:p,removeResizeListener:d}},render(){return vt("binder",this.$slots)}}),Ft=F({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=y("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?G(T("follower",this.$slots),[[t]]):T("follower",this.$slots)}}),{c:B}=ct(),Xt="vueuc-style",A={top:"bottom",bottom:"top",left:"right",right:"left"},q={start:"end",center:"center",end:"start"},j={top:"height",bottom:"height",left:"width",right:"width"},Et={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Yt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},It={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},H={top:!0,bottom:!1,left:!0,right:!1},Q={top:"end",bottom:"start",left:"end",right:"start"};function Nt(n,t,e,l,a,m){if(!a||m)return{placement:n,top:0,left:0};const[u,h]=n.split("-");let i=h!=null?h:"center",v={top:0,left:0};const w=(s,p,d)=>{let f=0,r=0;const c=e[s]-t[p]-t[s];return c>0&&l&&(d?r=H[p]?c:-c:f=H[p]?c:-c),{left:f,top:r}},b=u==="left"||u==="right";if(i!=="center"){const s=It[n],p=A[s],d=j[s];if(e[d]>t[d]){if(t[s]+t[d]<e[d]){const f=(e[d]-t[d])/2;t[s]<f||t[p]<f?t[s]<t[p]?(i=q[h],v=w(d,p,b)):v=w(d,s,b):i="center"}}else e[d]<t[d]&&t[p]<0&&t[s]>t[p]&&(i=q[h])}else{const s=u==="bottom"||u==="top"?"left":"top",p=A[s],d=j[s],f=(e[d]-t[d])/2;(t[s]<f||t[p]<f)&&(t[s]>t[p]?(i=Q[s],v=w(d,s,b)):(i=Q[p],v=w(d,p,b)))}let o=u;return t[u]<e[j[u]]&&t[u]<t[A[u]]&&(o=A[u]),{placement:i!=="center"?"".concat(o,"-").concat(i):o,left:v.left,top:v.top}}function Vt(n,t){return t?Yt[n]:Et[n]}function St(n,t,e,l,a,m){if(m)switch(n){case"bottom-start":return{top:"".concat(Math.round(e.top-t.top+e.height),"px"),left:"".concat(Math.round(e.left-t.left),"px"),transform:"translateY(-100%)"};case"bottom-end":return{top:"".concat(Math.round(e.top-t.top+e.height),"px"),left:"".concat(Math.round(e.left-t.left+e.width),"px"),transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:"".concat(Math.round(e.top-t.top),"px"),left:"".concat(Math.round(e.left-t.left),"px"),transform:""};case"top-end":return{top:"".concat(Math.round(e.top-t.top),"px"),left:"".concat(Math.round(e.left-t.left+e.width),"px"),transform:"translateX(-100%)"};case"right-start":return{top:"".concat(Math.round(e.top-t.top),"px"),left:"".concat(Math.round(e.left-t.left+e.width),"px"),transform:"translateX(-100%)"};case"right-end":return{top:"".concat(Math.round(e.top-t.top+e.height),"px"),left:"".concat(Math.round(e.left-t.left+e.width),"px"),transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:"".concat(Math.round(e.top-t.top),"px"),left:"".concat(Math.round(e.left-t.left),"px"),transform:""};case"left-end":return{top:"".concat(Math.round(e.top-t.top+e.height),"px"),left:"".concat(Math.round(e.left-t.left),"px"),transform:"translateY(-100%)"};case"top":return{top:"".concat(Math.round(e.top-t.top),"px"),left:"".concat(Math.round(e.left-t.left+e.width/2),"px"),transform:"translateX(-50%)"};case"right":return{top:"".concat(Math.round(e.top-t.top+e.height/2),"px"),left:"".concat(Math.round(e.left-t.left+e.width),"px"),transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:"".concat(Math.round(e.top-t.top+e.height/2),"px"),left:"".concat(Math.round(e.left-t.left),"px"),transform:"translateY(-50%)"};case"bottom":default:return{top:"".concat(Math.round(e.top-t.top+e.height),"px"),left:"".concat(Math.round(e.left-t.left+e.width/2),"px"),transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:"".concat(Math.round(e.top-t.top+e.height+l),"px"),left:"".concat(Math.round(e.left-t.left+a),"px"),transform:""};case"bottom-end":return{top:"".concat(Math.round(e.top-t.top+e.height+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width+a),"px"),transform:"translateX(-100%)"};case"top-start":return{top:"".concat(Math.round(e.top-t.top+l),"px"),left:"".concat(Math.round(e.left-t.left+a),"px"),transform:"translateY(-100%)"};case"top-end":return{top:"".concat(Math.round(e.top-t.top+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width+a),"px"),transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:"".concat(Math.round(e.top-t.top+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width+a),"px"),transform:""};case"right-end":return{top:"".concat(Math.round(e.top-t.top+e.height+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width+a),"px"),transform:"translateY(-100%)"};case"left-start":return{top:"".concat(Math.round(e.top-t.top+l),"px"),left:"".concat(Math.round(e.left-t.left+a),"px"),transform:"translateX(-100%)"};case"left-end":return{top:"".concat(Math.round(e.top-t.top+e.height+l),"px"),left:"".concat(Math.round(e.left-t.left+a),"px"),transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:"".concat(Math.round(e.top-t.top+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width/2+a),"px"),transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:"".concat(Math.round(e.top-t.top+e.height/2+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width+a),"px"),transform:"translateY(-50%)"};case"left":return{top:"".concat(Math.round(e.top-t.top+e.height/2+l),"px"),left:"".concat(Math.round(e.left-t.left+a),"px"),transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:"".concat(Math.round(e.top-t.top+e.height+l),"px"),left:"".concat(Math.round(e.left-t.left+e.width/2+a),"px"),transform:"translateX(-50%)"}}}const jt=B([B(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),B(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[B("> *",{pointerEvents:"all"})])]),Wt=F({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=y("VBinder"),e=_(()=>n.enabled!==void 0?n.enabled:n.show),l=O(null),a=O(null),m=()=>{const{syncTrigger:o}=n;o.includes("scroll")&&t.addScrollListener(i),o.includes("resize")&&t.addResizeListener(i)},u=()=>{t.removeScrollListener(i),t.removeResizeListener(i)};D(()=>{e.value&&(i(),m())});const h=bt();jt.mount({id:"vueuc/binder",head:!0,anchorMetaName:Xt,ssr:h}),E(()=>{u()}),Bt(()=>{e.value&&i()});const i=()=>{if(!e.value)return;const o=l.value;if(o===null)return;const s=t.targetRef,{x:p,y:d,overlap:f}=n,r=p!==void 0&&d!==void 0?Ct(p,d):S(s);o.style.setProperty("--v-target-width","".concat(Math.round(r.width),"px")),o.style.setProperty("--v-target-height","".concat(Math.round(r.height),"px"));const{width:c,minWidth:Y,placement:W,internalShift:nt,flip:ot}=n;o.setAttribute("v-placement",W),f?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:M}=o;c==="target"?M.width="".concat(r.width,"px"):c!==void 0?M.width=c:M.width="",Y==="target"?M.minWidth="".concat(r.width,"px"):Y!==void 0?M.minWidth=Y:M.minWidth="";const rt=S(o),it=S(a.value),{left:k,top:K,placement:I}=Nt(W,r,rt,nt,ot,f),P=Vt(I,f),{left:lt,top:st,transform:at}=St(I,it,r,K,k,f);o.setAttribute("v-placement",I),o.style.setProperty("--v-offset-left","".concat(Math.round(k),"px")),o.style.setProperty("--v-offset-top","".concat(Math.round(K),"px")),o.style.transform="translateX(".concat(lt,") translateY(").concat(st,") ").concat(at),o.style.setProperty("--v-transform-origin",P),o.style.transformOrigin=P};z(e,o=>{o?(m(),v()):u()});const v=()=>{Mt().then(i).catch(o=>console.error(o))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(o=>{z(N(n,o),i)}),["teleportDisabled"].forEach(o=>{z(N(n,o),v)}),z(N(n,"syncTrigger"),o=>{o.includes("resize")?t.addResizeListener(i):t.removeResizeListener(i),o.includes("scroll")?t.addScrollListener(i):t.removeScrollListener(i)});const w=wt(),b=_(()=>{const{to:o}=n;if(o!==void 0)return o;w.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:a,followerRef:l,mergedTo:b,syncPosition:i}},render(){return V(yt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=V("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[V("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?G(e,[[xt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});export{Dt as B,Ft as V,Wt as a,B as b,Xt as c,gt as d,At as e,_t as i,R as u};
