import{_ as $,A as N,m as F,I as G,x as R,n as E,q as e,w as d,p as a,aZ as x,o as z,t as B,$ as L,a_ as D}from"./index-BKvL4bCX.js";import{N as g}from"./Form-mPnyzTSO.js";import{N as u}from"./FormItem-DCbrlobA.js";import{N as p}from"./InputGroup-Ce5llk5n.js";import{N as f}from"./InputNumber-BVO98d2U.js";import{d as v}from"./Select-y25Hn_WI.js";import"./get-CQG32wRx.js";import"./Input-CylcvuRs.js";import"./use-merged-state-CKbFJlkG.js";import"./Popover-BG5MQIM7.js";import"./Follower-L5kM5qp8.js";const j={class:"tool-detail-page"},q={__name:"CalcDownloadTime",setup(A){const i=[{name:"KiB",speed:"KiB/s",rate:1},{name:"MiB",speed:"MiB/s",rate:1024},{name:"GiB",speed:"GiB/s",rate:1048576}],l=N({downloadedUnit:"KiB",downloadedValue:0,sizeUnit:"KiB",sizeValue:0,speedUnit:"KiB",speedValue:0}),o=N({duration:"",time:""}),b=F(null);function I(){let{downloadedUnit:w,downloadedValue:t,sizeUnit:n,sizeValue:U,speedUnit:y,speedValue:_}=l;if(U===0||_===0){o.duration="",o.time="";return}let S=i[i.findIndex(s=>s.name===w)].rate,K=i[i.findIndex(s=>s.name===n)].rate,k=i[i.findIndex(s=>s.name===y)].rate,C=t*S,c=U*K-C,H=_*k;if(c<0){L.warning("参数有误，请检查");return}let M=(c/H).toFixed(0),r=D(),m=r.add(M,"second"),V=m.diff(r,"day"),T=r.add(V,"day"),Y=D.duration(m.diff(T)).format("HH 时 mm 分 ss 秒");o.duration="".concat(V," 天 ").concat(Y),o.time=m.format("YYYY-MM-DD HH:mm:ss")}return G(l,()=>{clearTimeout(b.value),b.value=setTimeout(()=>{I()},1e3)},{deep:!0}),(w,t)=>(R(),E("div",j,[e(a(x),{size:"small",title:"参数"},{default:d(()=>[e(a(g),{class:"form-no-feedback","label-align":"right","label-placement":"left","label-width":"auto"},{default:d(()=>[e(a(u),{label:"文件大小："},{default:d(()=>[e(a(p),null,{default:d(()=>[e(a(f),{value:l.sizeValue,"onUpdate:value":t[0]||(t[0]=n=>l.sizeValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.sizeUnit,"onUpdate:value":t[1]||(t[1]=n=>l.sizeUnit=n),"label-field":"name","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1}),e(a(u),{label:"已下载大小："},{default:d(()=>[e(a(p),null,{default:d(()=>[e(a(f),{value:l.downloadedValue,"onUpdate:value":t[2]||(t[2]=n=>l.downloadedValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.downloadedUnit,"onUpdate:value":t[3]||(t[3]=n=>l.downloadedUnit=n),"label-field":"name","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1}),e(a(u),{label:"下载速度："},{default:d(()=>[e(a(p),null,{default:d(()=>[e(a(f),{value:l.speedValue,"onUpdate:value":t[4]||(t[4]=n=>l.speedValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.speedUnit,"onUpdate:value":t[5]||(t[5]=n=>l.speedUnit=n),"label-field":"speed","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(a(x),{size:"small",title:"计算结果"},{default:d(()=>[e(a(g),{class:"form-no-feedback","label-align":"right","label-placement":"left","label-width":"auto"},{default:d(()=>[e(a(u),{label:"大约需要时长："},{default:d(()=>[z("span",null,B(o.duration||"未计算"),1)]),_:1}),e(a(u),{label:"大约结束时间："},{default:d(()=>[z("span",null,B(o.time||"未计算"),1)]),_:1})]),_:1})]),_:1})]))}},te=$(q,[["__scopeId","data-v-b04e04f1"]]);export{te as default};
