import{_ as Y,M as z,r as $,L as E,z as G,A as L,E as e,F as d,D as a,b0 as B,B as N,C as x,$ as R,b1 as D}from"./index-kyOYeI3c.js";import{N as g}from"./Form-D_ZlyGgP.js";import{N as u,a as p}from"./InputNumber-Cq-jwxRJ.js";import{N as f}from"./InputGroup-gLx-NXim.js";import{d as v}from"./Select-HKOEcCWA.js";import"./get-DVh9gn5q.js";import"./Input-w8G_nzEt.js";import"./use-merged-state-BJ9UlbTd.js";import"./Popover-B62Dvx_m.js";import"./Follower-CM5zX_rV.js";const j={class:"tool-detail-page"},A={__name:"CalcDownloadTime",setup(q){const i=[{name:"KiB",speed:"KiB/s",rate:1},{name:"MiB",speed:"MiB/s",rate:1024},{name:"GiB",speed:"GiB/s",rate:1048576}],l=z({downloadedUnit:"KiB",downloadedValue:0,sizeUnit:"KiB",sizeValue:0,speedUnit:"KiB",speedValue:0}),o=z({duration:"",time:""}),b=$(null);function y(){let{downloadedUnit:U,downloadedValue:t,sizeUnit:n,sizeValue:w,speedUnit:I,speedValue:c}=l;if(w===0||c===0){o.duration="",o.time="";return}let S=i[i.findIndex(s=>s.name===U)].rate,C=i[i.findIndex(s=>s.name===n)].rate,K=i[i.findIndex(s=>s.name===I)].rate,M=t*S,_=w*C-M,k=c*K;if(_<0){R.warning("参数有误，请检查");return}let F=(_/k).toFixed(0),r=D(),m=r.add(F,"second"),V=m.diff(r,"day"),H=r.add(V,"day"),T=D.duration(m.diff(H)).format("HH 时 mm 分 ss 秒");o.duration="".concat(V," 天 ").concat(T),o.time=m.format("YYYY-MM-DD HH:mm:ss")}return E(l,()=>{clearTimeout(b.value),b.value=setTimeout(()=>{y()},1e3)},{deep:!0}),(U,t)=>(G(),L("div",j,[e(a(B),{size:"small",title:"参数"},{default:d(()=>[e(a(g),{class:"form-no-feedback","label-align":"right","label-placement":"left","label-width":"auto"},{default:d(()=>[e(a(u),{label:"文件大小："},{default:d(()=>[e(a(f),null,{default:d(()=>[e(a(p),{value:l.sizeValue,"onUpdate:value":t[0]||(t[0]=n=>l.sizeValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.sizeUnit,"onUpdate:value":t[1]||(t[1]=n=>l.sizeUnit=n),"label-field":"name","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1}),e(a(u),{label:"已下载大小："},{default:d(()=>[e(a(f),null,{default:d(()=>[e(a(p),{value:l.downloadedValue,"onUpdate:value":t[2]||(t[2]=n=>l.downloadedValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.downloadedUnit,"onUpdate:value":t[3]||(t[3]=n=>l.downloadedUnit=n),"label-field":"name","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1}),e(a(u),{label:"下载速度："},{default:d(()=>[e(a(f),null,{default:d(()=>[e(a(p),{value:l.speedValue,"onUpdate:value":t[4]||(t[4]=n=>l.speedValue=n),precision:2,min:0,max:1e4,step:1},null,8,["value"]),e(a(v),{value:l.speedUnit,"onUpdate:value":t[5]||(t[5]=n=>l.speedUnit=n),"label-field":"speed","value-field":"name",options:i},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(a(B),{size:"small",title:"计算结果"},{default:d(()=>[e(a(g),{class:"form-no-feedback","label-align":"right","label-placement":"left","label-width":"auto"},{default:d(()=>[e(a(u),{label:"大约需要时长："},{default:d(()=>[N("span",null,x(o.duration||"未计算"),1)]),_:1}),e(a(u),{label:"大约结束时间："},{default:d(()=>[N("span",null,x(o.time||"未计算"),1)]),_:1})]),_:1})]),_:1})]))}},le=Y(A,[["__scopeId","data-v-b04e04f1"]]);export{le as default};
