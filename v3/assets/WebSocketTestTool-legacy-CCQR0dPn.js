System.register(["./index-legacy-DtdHQVf4.js","./getCommonDateTime-legacy-DiLPap3O.js","./RadioGroup-legacy-11DriHlj.js","./Form-legacy-B0ghoUZf.js","./FormItem-legacy-CF8u1zse.js","./InputGroup-legacy-CtoD_w_3.js","./Select-legacy-D__twIEj.js","./Input-legacy-BYW6Nb2d.js","./Flex-legacy-Yyv4fGRB.js","./InputNumber-legacy-DkyliKFP.js","./use-merged-state-legacy-CAoj7XEw.js","./get-slot-legacy-BK898JfD.js","./get-legacy-DX4lm7ue.js","./Popover-legacy---2d6L80.js","./Follower-legacy-CXIJcsoN.js"],(function(e,t){"use strict";var l,a,s,n,o,i,r,u,d,c,p,g,f,m,v,b,y,h,x,_,w,S,k,C,T,j,I,N,L,F,W,$,D,E,H,z,M,R,U;return{setters:[e=>{l=e.f,a=e.l,s=e.r,n=e._,o=e.A,i=e.m,r=e.aA,u=e.D,d=e.x,c=e.n,p=e.q,g=e.w,f=e.p,m=e.b0,v=e.aK,b=e.aZ,y=e.a$,h=e.aN,x=e.o,_=e.b6,w=e.F,S=e.y,k=e.t,C=e.z,T=e.aI,j=e.b2,I=e.aG},e=>{N=e.g},e=>{L=e.a,F=e.s,W=e.N},e=>{$=e.N},e=>{D=e.N},e=>{E=e.N},e=>{H=e.d,z=e.g},e=>{M=e.N},e=>{R=e.N},e=>{U=e.N},null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".address-input .n-select[data-v-7e6f080b]{width:100px}.address-input .n-input[data-v-7e6f080b]{flex-grow:1;width:0}.logs-content[data-v-7e6f080b]{padding:8px 16px;border:1px solid #F0F0F0;border-radius:4px;background-color:#fff;line-height:1.6;overflow-y:auto;user-select:text}.logs-content .message-item[data-v-7e6f080b]{display:flex;margin:8px 0;word-break:break-all}.logs-content .message-item[data-v-7e6f080b]>*{margin:auto 0}.logs-content .n-tag[data-v-7e6f080b]{margin-right:.5em}.logs-content .message-content[data-v-7e6f080b]{position:relative}\n/*$vite$:1*/",document.head.appendChild(t);const J=l({name:"RadioButton",props:L,setup:F,render(){const{mergedClsPrefix:e}=this;return a("label",{class:[`${e}-radio-button`,this.mergedDisabled&&`${e}-radio-button--disabled`,this.renderSafeChecked&&`${e}-radio-button--checked`,this.focus&&[`${e}-radio-button--focus`]]},a("input",{ref:"inputRef",type:"radio",class:`${e}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),a("div",{class:`${e}-radio-button__state-border`}),s(this.$slots.default,(t=>t||this.label?a("div",{ref:"labelRef",class:`${e}-radio__label`},t||this.label):null)))}}),O={class:"tool-detail-page"},P={class:"message-list"},B=["innerHTML"],G={key:1,class:"message-content"};e("default",n({__name:"WebSocketTestTool",setup(e){const t=o({address:{prefix:"ws://",suffix:""},autoScroll:!0,inputs:"",logsHeight:320,logsMax:100,messages:[],messageID:0,parseType:"string",parseTypes:[{name:"html",label:"HTML"},{name:"json",label:"JSON"},{name:"string",label:"字符串"}],ws:null}),l=i(null);function a(){T.create({content:"确定要清空输入的内容吗？",negativeText:"取消",positiveText:"确定",title:"确认",type:"default",onPositiveClick:()=>{t.inputs=""}})}function s(){T.create({content:"确定要清空消息内容吗？",negativeText:"取消",positiveText:"确定",title:"确认",type:"default",onPositiveClick:()=>{t.messages=[],t.messageID=0}})}function n(e){let t=e.target;K({message:"WebSocket 已关闭",type:"warning"}),t&&(t.removeEventListener("close",n),t.removeEventListener("error",L),t.removeEventListener("message",F),t.removeEventListener("open",A))}function L(){K({message:"WebSocket 发生错误",type:"error"})}function F(e){let a=e.data,s=l.value;if(!a)return;let n=V(!1,a),o=n||a;console.log("%c%s","color: #2196F3;","[接收]",n||o),q("receive",a),I((()=>{s&&t.autoScroll&&s.scrollTo(0,s.scrollHeight)}))}function A(){K({message:"WebSocket 已连接",type:"info"})}function K(e){let{duration:t=3e3,message:l="",title:a="提示",type:s="info"}=e;return j.create({content:l,duration:t,title:a,type:s})}function q(e,l=""){if(-1===["receive","send"].indexOf(e))return;let a=t.messages.length,s=t.logsMax;a>=s&&t.messages.splice(0,a-s+1),t.messageID+=1,t.messages.push({id:t.messageID,message:l,time:Date.now(),type:e})}function Z(){t.ws&&(t.ws.close(),t.ws=null)}function Q(){let e=t.address,l=e.prefix+e.suffix;if(e.suffix)try{let e=new WebSocket(l);e.addEventListener("close",n),e.addEventListener("error",L),e.addEventListener("message",F),e.addEventListener("open",A),t.ws=e}catch(a){K({message:String(a),title:"连接失败",type:"error"})}else K({message:"请填写连接地址",title:"连接失败",type:"warning"})}function V(e=!1,l=""){if("json"!==t.parseType)return l;try{return JSON.parse(l)}catch(a){let t=e?"解析发送的 JSON 消息失败":"解析接收的 JSON 消息失败",l=String(a);return console.warn(t),console.warn(l),K({message:l,title:t,type:"warning"}),null}}function X(){let e=t.ws,l=t.inputs.replace(/(\n|\r)/g,""),a=V(!0,l);e&&a&&(console.log("%c%s","color: #4CAF50;","[发送]",a),e.send(l),q("send",l))}return r((()=>{"undefined"==typeof WebSocket&&K({duration:0,message:"您的浏览器不支持 WebSocket。",title:"错误",type:"error"})})),u((()=>{Z()})),(e,n)=>(d(),c("div",O,[p(f(b),{size:"small",title:"注意"},{default:g((()=>[p(f(m),null,{default:g((()=>n[9]||(n[9]=[v("由于浏览器限制，通过 HTTPS 访问网站时只能连接带 SSL 的 WebSocket（WSS）。")]))),_:1}),p(f(m),null,{default:g((()=>n[10]||(n[10]=[v("若需要连接不带 SSL 的 WebSocket（WS），建议下载到本地后使用。")]))),_:1})])),_:1}),p(f(b),{size:"small",title:"输入"},{default:g((()=>[p(f($),{class:"form-no-feedback","label-align":"left","label-placement":"top","label-width":"auto",onContextmenu:n[3]||(n[3]=y((()=>{}),["stop"]))},{default:g((()=>[p(f(D),{label:"连接地址"},{default:g((()=>[p(f(E),{class:"address-input"},{default:g((()=>[p(f(H),{value:t.address.prefix,"onUpdate:value":n[0]||(n[0]=e=>t.address.prefix=e),options:[{label:"ws://",value:"ws://"},{label:"wss://",value:"wss://"}]},null,8,["value"]),p(f(M),{value:t.address.suffix,"onUpdate:value":n[1]||(n[1]=e=>t.address.suffix=e),type:"text"},null,8,["value"])])),_:1})])),_:1}),p(f(D),{label:"发送内容（自动移除换行符）"},{default:g((()=>[p(f(M),{value:t.inputs,"onUpdate:value":n[2]||(n[2]=e=>t.inputs=e),placeholder:"在此处输入要发送的内容",type:"textarea",rows:2},null,8,["value"])])),_:1})])),_:1})])),_:1}),p(f(b),{size:"small",title:"操作"},{default:g((()=>[p(f(R),null,{default:g((()=>[p(f(h),{type:"success",disabled:null!==t.ws,onClick:Q},{default:g((()=>n[11]||(n[11]=[v("连接")]))),_:1},8,["disabled"]),p(f(h),{type:"warning",disabled:null===t.ws,onClick:Z},{default:g((()=>n[12]||(n[12]=[v("断开")]))),_:1},8,["disabled"]),p(f(h),{type:"primary",disabled:null===t.ws,onClick:X},{default:g((()=>n[13]||(n[13]=[v("发送")]))),_:1},8,["disabled"]),p(f(h),{type:"error",onClick:a},{default:g((()=>n[14]||(n[14]=[v("清空输入")]))),_:1}),p(f(h),{type:"error",onClick:s},{default:g((()=>n[15]||(n[15]=[v("清空消息")]))),_:1})])),_:1})])),_:1}),p(f(b),{size:"small",title:"日志"},{default:g((()=>[x("div",{ref_key:"logsContentRef",ref:l,class:"logs-content",style:_({height:t.logsHeight+"px"}),onContextmenu:n[4]||(n[4]=y((()=>{}),["stop"]))},[x("div",P,[(d(!0),c(w,null,S(t.messages,(e=>(d(),c("div",{key:e.id,class:"message-item"},[p(f(z),{type:"send"===e.type?"primary":"success",size:"small"},{default:g((()=>[v(k(f(N)(e.time)),1)])),_:2},1032,["type"]),"html"===t.parseType?(d(),c("div",{key:0,innerHTML:e.message,class:"message-content"},null,8,B)):(d(),c("div",G,k(e.message),1))])))),128))])],36)])),_:1}),p(f(b),{size:"small",title:"设置"},{default:g((()=>[p(f($),{class:"form-no-feedback","label-align":"left","label-placement":"top","label-width":"auto"},{default:g((()=>[p(f(D),{label:"日志高度"},{default:g((()=>[p(f(U),{value:t.logsHeight,"onUpdate:value":n[5]||(n[5]=e=>t.logsHeight=e),min:80,max:800,precision:0,step:1},null,8,["value"])])),_:1}),p(f(D),{label:"日志最大行数"},{default:g((()=>[p(f(U),{value:t.logsMax,"onUpdate:value":n[6]||(n[6]=e=>t.logsMax=e),min:1,max:8192,precision:0,step:1},null,8,["value"])])),_:1}),p(f(D),{label:"解析类型"},{default:g((()=>[p(f(W),{value:t.parseType,"onUpdate:value":n[7]||(n[7]=e=>t.parseType=e)},{default:g((()=>[(d(!0),c(w,null,S(t.parseTypes,(e=>(d(),C(f(J),{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["value"])])),_:1}),p(f(D),{label:"自动滚动"},{default:g((()=>[p(f(W),{value:t.autoScroll,"onUpdate:value":n[8]||(n[8]=e=>t.autoScroll=e)},{default:g((()=>[p(f(J),{label:"开启",value:!0}),p(f(J),{label:"关闭",value:!1})])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})]))}},[["__scopeId","data-v-7e6f080b"]]))}}}));
