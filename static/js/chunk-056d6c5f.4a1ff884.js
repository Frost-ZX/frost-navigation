(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-056d6c5f"],{"3c79":function(e,s,t){},bf77:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"tool-elem"},[t("div",{staticClass:"ctrl"},[t("div",{staticClass:"title"},[e._v("操作")]),t("div",{staticClass:"content"},[t("el-button",{attrs:{type:"success",disabled:null!==e.ws,size:"medium",plain:""},on:{click:function(s){return e.wsConnect()}}},[e._v("连接")]),t("el-button",{attrs:{type:"warning",disabled:null===e.ws,size:"medium",plain:""},on:{click:function(s){return e.wsClose()}}},[e._v("断开")]),t("el-button",{attrs:{type:"primary",disabled:null===e.ws,size:"medium",plain:""},on:{click:function(s){return e.wsSend()}}},[e._v("发送")]),t("el-button",{attrs:{type:"danger",size:"medium",plain:""},on:{click:function(s){return e.clearInputs()}}},[e._v("清空输入")]),t("el-button",{attrs:{type:"danger",size:"medium",plain:""},on:{click:function(s){return e.clearMessages()}}},[e._v("清空消息")])],1)]),t("div",{staticClass:"inputs"},[t("div",{staticClass:"title"},[e._v("输入")]),t("div",{staticClass:"content"},[t("div",{staticClass:"input-address"},[t("div",{staticClass:"title"},[e._v("连接地址")]),t("el-input",{model:{value:e.address.suffix,callback:function(s){e.$set(e.address,"suffix",s)},expression:"address.suffix"}},[t("el-select",{attrs:{slot:"prepend"},slot:"prepend",model:{value:e.address.prefix,callback:function(s){e.$set(e.address,"prefix",s)},expression:"address.prefix"}},[t("el-option",{attrs:{label:"ws://",value:"ws://"}}),t("el-option",{attrs:{label:"wss://",value:"wss://"}})],1)],1)],1),t("div",{staticClass:"input-send"},[t("div",{staticClass:"title"},[e._v("发送内容")]),t("el-input",{attrs:{type:"textarea",placeholder:"在此处输入要发送的内容（换行符会被移除）",rows:2},model:{value:e.inputs,callback:function(s){e.inputs=s},expression:"inputs"}})],1)])]),t("div",{staticClass:"logs"},[t("div",{staticClass:"title"},[e._v("日志")]),t("div",{ref:"logsContent",staticClass:"content",style:{height:e.logsHeight+"rem"}},[t("div",{staticClass:"messages"},e._l(e.messages,(function(s){return t("div",{key:s.id,staticClass:"item"},[t("el-tag",{attrs:{type:"send"===s.type?"primary":"success",effect:"plain",size:"small"}},[e._v(e._s(e._f("tsToTime")(s.time)))]),"html"===e.parseType?t("span",{domProps:{innerHTML:e._s(s.message)}}):t("span",[e._v(e._s(s.message))])],1)})),0)])]),t("div",{staticClass:"config"},[t("div",{staticClass:"title"},[e._v("设置")]),t("div",{staticClass:"content"},[t("div",{staticClass:"config-item"},[t("div",{staticClass:"title"},[e._v("日志高度")]),t("el-input-number",{attrs:{size:"medium",min:5,max:50,step:1,"step-strictly":""},model:{value:e.logsHeight,callback:function(s){e.logsHeight=s},expression:"logsHeight"}})],1),t("div",{staticClass:"config-item"},[t("div",{staticClass:"title"},[e._v("解析类型")]),t("el-radio-group",{attrs:{size:"medium"},model:{value:e.parseType,callback:function(s){e.parseType=s},expression:"parseType"}},e._l(e.parseTypes,(function(s){return t("el-radio-button",{key:s.name,attrs:{label:s.name}},[e._v(e._s(s.label))])})),1)],1),t("div",{staticClass:"config-item"},[t("div",{staticClass:"title"},[e._v("自动滚动")]),t("el-radio-group",{attrs:{size:"medium"},model:{value:e.autoScroll,callback:function(s){e.autoScroll=s},expression:"autoScroll"}},[t("el-radio-button",{attrs:{label:!0}},[e._v("开启")]),t("el-radio-button",{attrs:{label:!1}},[e._v("关闭")])],1)],1)])])])},a=[],n={name:"OtherWebSocket",filters:{tsToTime(e){const s=new Date(e),t={h:s.getHours(),m:s.getMinutes(),s:s.getSeconds()};for(let i in t)t[i]<10&&(t[i]="0"+t[i]);return`${t.h}:${t.m}:${t.s}`}},data(){return{address:{prefix:"ws://",suffix:""},autoScroll:!0,inputs:"",logsHeight:20,messages:[],messageID:0,parseType:"string",parseTypes:[{name:"html",label:"HTML"},{name:"json",label:"JSON"},{name:"string",label:"字符串"}],ws:null}},mounted(){this.init()},methods:{init(){"undefined"===typeof WebSocket&&this.notify({duration:0,message:"您的浏览器不支持 WebSocket。",title:"错误",type:"error"})},clearInputs(){this.inputs=""},clearMessages(){this.messages=[],this.messageID=0},notify(e){const s={duration:5e3,message:"",title:"提示",type:"info"};this.$notify({...s,...e})},handleClose(){this.notify({message:"WebSocket 已关闭",type:"warning"}),this.ws=null},handleError(){this.notify({message:"WebSocket 发生错误",type:"error"})},handleMessage(e){const s=e.data,t=this.$refs["logsContent"];if(!s)return;const i=this.wsParse(s),a=i||s;console.log("%c%s","color: #2196F3;","[接收]",i||a),this.messageID+=1,this.messages.push({id:this.messageID,message:s,time:(new Date).getTime(),type:"receive"}),this.$nextTick(()=>{t&&this.autoScroll&&t.scrollTo(0,t.scrollHeight)})},handleOpen(){this.notify({message:"WebSocket 已连接",type:"info"})},wsClose(){const e=this.ws;e&&e.close()},wsConnect(){const e=this.address,s=e.prefix+e.suffix;try{const e=new WebSocket(s);e.addEventListener("close",this.handleClose),e.addEventListener("error",this.handleError),e.addEventListener("message",this.handleMessage),e.addEventListener("open",this.handleOpen),this.ws=e}catch(t){this.notify({duration:1e4,message:t.toString(),title:"错误",type:"error"})}},wsParse(e=""){const s=this.parseType;if("json"!==s)return e;try{const s=JSON.parse(e);return s}catch(t){return this.notify({message:t.toString(),title:"JSON 格式错误",type:"warning"}),null}},wsSend(){const e=this.ws,s=this.inputs.replace(/(\n|\r)/g,""),t=this.wsParse(s);e&&t&&(console.log("%c%s","color: #4CAF50;","[发送]",t),e.send(s),this.messageID+=1,this.messages.push({id:this.messageID,message:s,time:(new Date).getTime(),type:"send"}))}}},l=n,o=(t("fc61"),t("2877")),r=Object(o["a"])(l,i,a,!1,null,"48fe6ec8",null);s["default"]=r.exports},fc61:function(e,s,t){"use strict";t("3c79")}}]);